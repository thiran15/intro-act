angular.module("ngDraggable",[]).service("ngDraggable",[function(){var a=this;a.inputEvent=function(a){return angular.isDefined(a.touches)?a.touches[0]:angular.isDefined(a.originalEvent)&&angular.isDefined(a.originalEvent.touches)?a.originalEvent.touches[0]:a}}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(a,b,c,d,e){return{restrict:"A",link:function(f,g,h){f.value=h.ngDrag;var i,k,l,m,n,o,p,u,j=!1,q="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,r="touchstart mousedown",s="touchmove mousemove",t="touchend mouseup",v=f.$id,w=null,x=null,y=!1,z=null,A=b(h.ngDragStart)||null,B=b(h.ngDragStop)||null,C=b(h.ngDragSuccess)||null,D=!angular.isDefined(h.allowTransform)||f.$eval(h.allowTransform),E=b(h.ngDragData),F=angular.noop,G=function(){if(g.attr("draggable","false"),g[0].querySelectorAll)var a=angular.element(g[0].querySelectorAll("[ng-drag-handle]"));else var a=g.find("[ng-drag-handle]");a.length&&(u=a),H(!0)},H=function(a){a&&(f.$on("$destroy",I),f.$watch(h.ngDrag,J),f.$watch(h.ngCenterAnchor,K),u?u.on(r,M):g.on(r,M),q||"img"!=g[0].nodeName.toLowerCase()||g.on("mousedown",function(){return!1}))},I=function(a){H(!1)},J=function(a,b){y=a},K=function(a,b){angular.isDefined(a)&&(j=a||"true")},L=function(a){return angular.isDefined(angular.element(a.target).attr("ng-cancel-drag"))},M=function(a){y&&(L(a)||"mousedown"==a.type&&0!=a.button||(q?(N(),z=setTimeout(function(){N(),O(a)},100),c.on(s,N),c.on(t,N)):O(a)))},N=function(){clearTimeout(z),c.off(s,N),c.off(t,N)},O=function(b){y&&(b.preventDefault(),i=g[0].getBoundingClientRect(),x=D?i:{left:document.body.scrollLeft,top:document.body.scrollTop},g.centerX=g[0].offsetWidth/2,g.centerY=g[0].offsetHeight/2,k=e.inputEvent(b).pageX,l=e.inputEvent(b).pageY,o=k-i.left,p=l-i.top,j?(m=k-g.centerX-d.pageXOffset,n=l-g.centerY-d.pageYOffset):(m=k-o-d.pageXOffset,n=l-p-d.pageYOffset),c.on(s,P),c.on(t,Q),F=a.$on("draggable:_triggerHandlerMove",function(a,b){P(b)}))},P=function(b){y&&(b.preventDefault(),g.hasClass("dragging")||(w=E(f),g.addClass("dragging"),a.$broadcast("draggable:start",{x:k,y:l,tx:m,ty:n,event:b,element:g,data:w}),A&&f.$apply(function(){A(f,{$data:w,$event:b})})),k=e.inputEvent(b).pageX,l=e.inputEvent(b).pageY,j?(m=k-g.centerX-x.left,n=l-g.centerY-x.top):(m=k-o-x.left,n=l-p-x.top),T(m,n),a.$broadcast("draggable:move",{x:k,y:l,tx:m,ty:n,event:b,element:g,data:w,uid:v,dragOffset:x}))},Q=function(b){y&&(b.preventDefault(),a.$broadcast("draggable:end",{x:k,y:l,tx:m,ty:n,event:b,element:g,data:w,callback:R,uid:v}),g.removeClass("dragging"),g.parent().find(".drag-enter").removeClass("drag-enter"),S(),c.off(s,P),c.off(t,Q),B&&f.$apply(function(){B(f,{$data:w,$event:b})}),F())},R=function(a){C&&f.$apply(function(){C(f,{$data:w,$event:a})})},S=function(){D?g.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):g.css({position:"",top:"",left:""})},T=function(a,b){D?g.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+b+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+b+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+a+", "+b+")"}):g.css({left:a+"px",top:b+"px",position:"fixed"})};G()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(a,b,c,d,e){return{restrict:"A",link:function(c,e,f){c.value=f.ngDrop,c.isTouching=!1;var g=null,h=c.$id,i=!1,j=a(f.ngDropSuccess),k=a(f.ngDragStart),l=a(f.ngDragStop),m=a(f.ngDragMove),n=function(){o(!0)},o=function(a){a&&(c.$watch(f.ngDrop,q),c.$on("$destroy",p),c.$on("draggable:start",r),c.$on("draggable:move",s),c.$on("draggable:end",t))},p=function(a){o(!1)},q=function(a,b){i=a},r=function(a,d){i&&(u(d.x,d.y,d.element),f.ngDragStart&&b(function(){k(c,{$data:d.data,$event:d})}))},s=function(a,d){i&&(u(d.x,d.y,d.element),f.ngDragMove&&b(function(){m(c,{$data:d.data,$event:d})}))},t=function(a,d){return i&&h!==d.uid?(u(d.x,d.y,d.element)&&(d.callback&&d.callback(d),f.ngDropSuccess&&b(function(){j(c,{$data:d.data,$event:d,$target:c.$eval(c.value)})})),f.ngDragStop&&b(function(){l(c,{$data:d.data,$event:d})}),void v(!1,d.element)):void v(!1,d.element)},u=function(a,b,d){var f=w(a,b);return c.isTouching=f,f&&(g=e),v(f,d),f},v=function(a,b){a?(e.addClass("drag-enter"),b.addClass("drag-over")):g==e&&(g=null,e.removeClass("drag-enter"),b.removeClass("drag-over"))},w=function(a,b){var c=e[0].getBoundingClientRect();return a-=d[0].body.scrollLeft+d[0].documentElement.scrollLeft,b-=d[0].body.scrollTop+d[0].documentElement.scrollTop,a>=c.left&&a<=c.right&&b<=c.bottom&&b>=c.top};n()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(a,b,c){return{restrict:"A",link:function(a,b,c){var d,e=!0;a.clonedData={};var g=function(){d=b.find("img"),b.attr("draggable","false"),d.attr("draggable","false"),m(),h(!0)},h=function(b){b&&(a.$on("draggable:start",j),a.$on("draggable:move",k),a.$on("draggable:end",l),i())},i=function(){d.off("mousedown touchstart touchmove touchend touchcancel",o),d.on("mousedown touchstart touchmove touchend touchcancel",o)},j=function(c,d,f){e=!0,angular.isDefined(d.data.allowClone)&&(e=d.data.allowClone),e&&(a.$apply(function(){a.clonedData=d.data}),b.css("width",d.element[0].offsetWidth),b.css("height",d.element[0].offsetHeight),n(d.tx,d.ty))},k=function(a,b){e&&(_tx=b.tx+b.dragOffset.left,_ty=b.ty+b.dragOffset.top,n(_tx,_ty))},l=function(a,b){e&&m()},m=function(){b.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},n=function(a,c){b.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+c+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+c+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+a+", "+c+")"})},o=function(a){var b=a;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};g()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(a,b,c){var d=function(){b.attr("draggable","false"),e(!0)},e=function(a){a&&b.on("mousedown touchstart touchmove touchend touchcancel",f)},f=function(a){var b=a.originalEvent;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};d()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(a,b,c){b.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(a,b,c,d,e){return{restrict:"A",link:function(b,c,f){var h=null,i={verticalScroll:f.verticalScroll||!0,horizontalScroll:f.horizontalScroll||!0,activationDistance:f.activationDistance||75,scrollDistance:f.scrollDistance||15},j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),k=!1,l=function(){function b(a){var c=Array.prototype.slice.call(arguments);k&&j(function(){e.$apply(function(){a.apply(null,c),b(a)})})}k=!0,b(function(){if(h){var b=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),g=0,j=0;if(i.horizontalScroll&&(h.clientX<i.activationDistance?g=-i.scrollDistance:h.clientX>b-i.activationDistance&&(g=i.scrollDistance)),i.verticalScroll&&(h.clientY<i.activationDistance?j=-i.scrollDistance:h.clientY>f-i.activationDistance&&(j=i.scrollDistance)),0!==g||0!==j){var k=a.pageXOffset||d[0].documentElement.scrollLeft,l=a.pageYOffset||d[0].documentElement.scrollTop,m=c.css("transform");c.css("transform","initial"),a.scrollBy(g,j);var n=(a.pageXOffset||d[0].documentElement.scrollLeft)-k,o=(a.pageYOffset||d[0].documentElement.scrollTop)-l;c.css("transform",m),h.pageX+=n,h.pageY+=o,e.$emit("draggable:_triggerHandlerMove",h)}}})},m=function(){k=!1};b.$on("draggable:start",function(a,b){b.element[0]===c[0]&&(k||l())}),b.$on("draggable:end",function(a,b){b.element[0]===c[0]&&k&&m()}),b.$on("draggable:move",function(a,b){b.element[0]===c[0]&&(h=b.event)})}}}]);